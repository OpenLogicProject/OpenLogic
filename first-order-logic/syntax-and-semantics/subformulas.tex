% Part: first-order-logic
% Chapter: syntax-and-semantics
% Section: !p{subformula}

\documentclass[../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{fol}{syn}{sbf}

\olsection{Subformulas}

\begin{explain}
It is often useful to talk about the !p{formula} that ``make up'' a given
!!{formula}.  We call these the \emph{subformulas}.  Any !!{formula} counts as
a !!{subformula} of itself; a subformula of $!A$ other than $!A$ itself is
a \emph{proper !!{subformula}}.
\end{explain}

\begin{defn}[Sub-!!{formula}]
The set of \emph{sub-!p{formula}} of a !!{formula}~$!A$,
$\SubFrm{!A}$, is defined inductively as follows:
\begin{enumerate}
\item If $!A$ is atomic, then $\SubFrm{!A} = \{!A\}$.
\item $\SubFrm{\lnot !A} = \{\lnot !A\} \cup \SubFrm{!A}$
\item If $!B$ is also a !!{formula}, then $\SubFrm{!A \land !B} = \{!A
  \land !B\} \cup \SubFrm{!A} \cup \SubFrm{!B}$
\item If $!B$ is also a !!{formula}, then $\SubFrm{!A \lor !B} = \{!A \lor
  !B\} \cup \SubFrm{!A} \cup \SubFrm{!B}$
\item If $!B$ is also a !!{formula}, then $\SubFrm{!A \lif !B} = \{!A \lif
  !B\} \cup \SubFrm{!A} \cup \SubFrm{!B}$
\item If $!B$ is also a !!{formula}, then $\SubFrm{!A \liff !B} = \{!A
  \liff !B\} \cup \SubFrm{!A} \cup \SubFrm{!B}$
\item If $x$ is a !!{variable}, then $\SubFrm{\forall[x][!A]} =
  \{\lforall[x][!A]\} \cup \SubFrm{!A}$
\item If $x$ is a !!{variable}, then $\SubFrm{\lexists[x][!A]} =
  \{\lexists[x][!A]\} \cup \SubFrm{!A}$
\end{enumerate}
The set of all \emph{proper} sub-!p{formula} of $!A$ is $\SubFrm{!A} \setminus
\{!A\}$. That is, a !!{formula} $!B$ is a proper !!{subformula} of $!A$ if and
only if $!B$ is a sub-!!{formula} of $!A$ but is distinct from $!A$.
\end{defn}

%Begin digression?

\begin{defn}[Immediate sub-!!{formula}]
Given !p{formula} $!A$ and $!B$, define \emph{immediate sub-!!{formula}}
inductively as follows:
\begin{enumerate}
\item Atomic !p{formula} have no immediate sub-!p{formula}.
\item $!A$ is the immediate sub-!!{formula} of $\lnot !A$.
\item $!A$ and $!B$ are the immediate sub-!p{formula} of $(!A \land !B)$.
\item $!A$ and $!B$ are the immediate sub-!p{formula} of $(!A \lor !B)$.
\item $!A$ and $!B$ are the immediate sub-!p{formula} of $(!A \lif !B)$.
\item $!A$ and $!B$ are the immediate sub-!p{formula} of $(!A \liff !B)$.
\item $!A$ is the immediate sub-!!{formula} of $\lforall[x][!A]$.
\item $!A$ is the immediate sub-!!{formula} of $\lexists[x][!A]$.
% I listed these all separately rather than combining them because
% eventually we will have to be able to let people pick which logical
% symbols they use. if we can make it work without looking so "listy"
% (so we can condense the clauses), that would probably look better.
\end{enumerate}
\end{defn}

% option 2: Alternate definition of !!{subformula} via the definition of
% immediate !!{subformula}? This one avoids the SBF notation.

\begin{defn}[Sub-!!{formula}]
Define \emph{sub-!!{formula}} as follows:
\begin{enumerate}
\item If $!B$ is equal to $!A$, then $!B$ is a sub-!!{formula} of $!A$.
\item If $!B$ is an immediate sub-!!{formula} of $!A$, then $!B$ is a
  sub-!!{formula} of $!A$.
\item If $!C$ is a sub-!!{formula} of $!B$ and $!B$ is a sub-!!{formula} of
  $!A$, then $!C$ is also a sub-!!{formula} of $!A$.
\end{enumerate}
A !!{formula} $!B$ is a \emph{proper} sub-!!{formula} of $!A$ if and only if it
is a sub-!!{formula} of $!A$ and is not equal to $!A$.
\end{defn}

% option 3: Or we could do it this way, combining immediate, proper,
% (regular) !!{subformula} definitions, so this would go after the
% definition of immediate !!{subformula}

\begin{defn}[Proper sub-!!{formula}]
Define \emph{proper sub-!!{formula}} as follows:
\begin{enumerate}
\item If $!B$ is an immediate sub-!!{formula} of $!A$, then $!B$ is a
  proper sub-!!{formula} of $!A$.
\item If $!C$ is a proper sub-!!{formula} of $!B$ and $!B$ is a proper
  sub-!!{formula} of $!A$, then $!C$ is also a proper sub-!!{formula} of $!A$.
\end{enumerate}
\end{defn}

\begin{defn}[Sub-!!{formula}]
Define \emph{sub-!!{formula}} as follows:
\begin{enumerate}
\item If $!B$ is equal to $!A$, then $!B$ is a sub-!!{formula} of $!A$.
\item If $!B$ is a proper sub-!!{formula} of $!A$, then $!B$ is a
  sub-!!{formula} of~$!A$.
\end{enumerate}
\end{defn}

\end{document}

% Part: first-order-logic
% Chapter: natural-deduction
% Section: soundness

\documentclass[../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{fol}{ntd}{sou}
\olsection{Soundness}

\begin{explain}
A !!{derivation} system, such as natural deduction, is \emph{sound}
if it cannot !!{derive} things that do not actually follow.  Soundness is
thus a kind of guaranteed safety property for !!{derivation} systems.
Depending on which proof theoretic property is in question, we would
like to know for instance, that
\begin{enumerate}
\item every !!{derivable} !!{sentence} is valid;
\item if a !!{sentence} is !!{derivable} from some others, it is also a
  consequence of them;
\item if a set of !!{sentence}s is inconsistent, it is unsatisfiable.
\end{enumerate}
These are important properties of a !!{derivation} system.  If any of them do
not hold, the !!{derivation} system is deficient---it would !!{derive} too much.
Consequently, establishing the soundness of a !!{derivation} system is of the
utmost importance.
\end{explain}

\begin{thm}[Soundness]
\ollabel{ntd-soundness} If $!A$ is !!{derivable} from $\Gamma$,
 then if $\Sat{M}{\Gamma}$, then $\Sat{M}{!A}$.
\end{thm}

\begin{proof}
Let $\Pi$ be a !!{derivation} of $!A$. We proceed by
induction on the number of inferences in~$\Pi$.

If the number of inferences is~0, then $\Pi$ consists only of an
initial !!{formula}. Every initial !!{formula} $!A$ is in $\Gamma$,
so if $\Gamma$ is satisfied by $\Struct M$, then $\Sat{M}{!A}$.

If the number of inferences is greater than~0, we distinguish cases
according to the type of the lowermost inference. By induction
hypothesis, we can assume that the premises of that inference are
valid.

First, we consider the possible inferences with only one premise.

\begin{enumerate}
\item The last inference is $\lnot$~Intro: We assume that the proof
of $\lfalse$ from $!A$ is sound. So, if $\Sat{M}{!A}$, then $\Sat{M}
{\lfalse}$. Since $\lfalse$ can never be satisfied, $\Sat/{M}{!A}$.
So, $\Sat{M}{\lnot !A}$.
  
\item The last inference is $\lnot$~Elim: Exercise.

\item The last inference is $\land$~Elim: There are two variants: $!A$ or $!B$
  may be inferred from the premise $!A \land !B$.  In the first case,
  consider a !!{structure}~$\Struct M$. Let $\Sat{M}{!A \land !B}$. If this
  is the case, then $\Sat{M}{!A}$. The case where $!B$ is inferred from $!A 
  \land !B$ is handled the same, changing $!A$ to $!B$.
  
\item The last inference is $\lor$~Intro: There are two variants: $!A
  \lor !B$ may be inferred from $!A$ or $!B$. In the first case,
  Consider a !!{structure}~$\Struct M$. We assume that $\Sat{M}
  {!A}$. But by definition, if $\Sat{M}{!A}$, then $\Sat{M}{!A \lor !B}$.
  The case where $!A \lor !B$ is inferred from $!B$ is
  handled the same, changing $!A$ to $!B$.
  
\item The last inference is $\lif$~Intro: We assume that the derivation
  of $!B$ from $!A$ is sound. So, if $\Sat{M}{!A}$ then $\Sat{M}{!B}$.
  There are then two cases. (1) $\Sat{M}{!A}$. If $\Sat{M}{!A}$, then 
  $\Sat{M}{!B}$, by assumption. So, $\Sat{M}{!A \lif !B}$. (2) $\Sat/{M}
  {!A}$. Then, $\Sat{M}{!A \lif !B}$. So in either case, $\Sat{M}{!A \lif !B}$
  
\item The last inference is $\forall$~Intro: We assume that the derivation of
$!A(a)$ from $\Gamma$ is sound, and therefore $\Sat{M}{!A(a)}$.

  Let $\Struct{M'}$ be exactly like $\Struct M$ except that
  $\Assign{a}{M} \neq \Assign{a}{M'}$, $\Struct{M'}$. We
  must have $\Sat{M'}{!A(a)}$.

  We now show that $\Sat{M}{\lforall[x][!A(x)]}$.  To do this, we have
  to show that for every variable assignment~$s$,
  $\Sat{M}{\lforall[x][!A(x)]}[s]$.  This in turn means that for every
  $x$-variant $s'$ of $s$, we must have $\Sat{M}{!A(x)}[s']$.  So
  consider any variable assignment~$s$ and let $s'$ be an $x$-variant
  of~$s$.  Since $\Gamma$ consists entirely of sentences,
  $\Sat{M}{!E}[s]$ iff $\Sat{M}{!E}[s']$ iff $\Sat{M}{!E}$ for all
  $!E \in \Gamma$.  Let $\Struct M'$ be like $\Struct M$
  except that $\Assign{a}{M'} = s'(x)$.  Then $\Sat{M}{!A(x)}[s']$ iff
  $\Sat{M'}{!A(a)}$ (as $!A(x)$ does not contain~$a$).  Since we've
  already established that $\Sat{M'}{!A(a)}$ for all $\Struct M'$
  which differ from $\Struct M$ at most in what they assign to~$a$,
  this means that $\Sat{M}{!A(x)}[s']$.  Thus we've shown that
  $\Sat{M}{\lforall[x][!A(x)]}[s]$.  Since $s$ is an arbitrary variable
  assignment and $\lforall[x][!A(x)]$ is a sentence, then
  $\Sat{M}{\lforall[x][!A(x)]}$.

  
\item The last inference is $\lexists$~Intro: Exercise.

\item The last inference is $\forall$~Elim: Exercise.


\end{enumerate}
Now let's consider the possible inferences with several premises:
$\lor$~Elim, $\land$~Intro, and $\lif$~Elim.
\begin{enumerate}

\item The last inference is $\land$~Intro.  The premises are $!A$
  and $!B$. Consider a !!{structure}~$\Struct M$. By induction 
  hypothesis, $\Sat{M}{!A}$ and $\Sat{M}{!B}$. So, $\Sat{M}
  {!A \land !B}$.
  
\item The last inference is $\lor$~Elim: Exercise.

\item The last inference is $\lif$~Elim. Consider a !!{structure}
~$\Struct M$. By hypothesis, $\Sat{M}{!A \lif !B}$ and $\Sat{M}{!A}$. 
 So, $\Sat{M}{!B}$, by definition.
    
\item The last inference is $\lexists$~Elim: Exercise.
\end{enumerate}
\end{proof}

\begin{prob}
Complete the proof of \olref[fol][seq][sou]{sequent-soundness}.
\end{prob}

\begin{cor}
\ollabel{weak-soundness}
If $\Proves !A$ then $!A$ is valid.
\end{cor}

\begin{cor}
\ollabel{entailment-soundness}
If $\Gamma \Proves !A$ then $\Gamma \Entails !A$.
\end{cor}

\begin{proof}
If $\Gamma \Proves !A$ then for some finite subset $\Gamma_0 \subseteq
\Gamma$, there is !!a{derivation} of $!A$ from $\Gamma_0$.  By
\olref{ntd-soundness}, every !!{structure} $\Struct M$ either
makes some $!B \in \Gamma_0$ false or makes $!A$ true.  Hence, if
$\Sat{M}{\Gamma_0}$ then also $\Sat{M}{!A}$.
\end{proof}

\begin{cor}
\ollabel{consistency-soundness}
If $\Gamma$ is satisfiable, then it is consistent.
\end{cor}

\begin{proof}
We prove the contrapositive.  Suppose that $\Gamma$ is not
consistent.  Then $\Gamma \Proves \lfalse$, i.e., there is a finite
$\Gamma_0 \subseteq \Gamma$ and !!a{derivation} of $\lfalse$
from $\Gamma_0$. By \olref{ntd-soundness}, any !!{structure} 
$\Struct M$ that satisfies $\Gamma_0$ must satisfy $\lfalse$.  
Since $\Sat/{M}{\lfalse}$ for every !!{structure}~$\Struct M$,
there must be an $!E \in \Gamma_0$ so that $\Sat/{M}{!E}$, 
and since $\Gamma_0 \subseteq \Gamma$, that $!E$ is also
in~$\Gamma$.  In other words, no $\Struct M$ satisfies $\Gamma$, 
i.e., $\Gamma$ is not satisfiable.
\end{proof}

\end{document}

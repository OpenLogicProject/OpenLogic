% Part: first-order-logic 
% Chapter: axiomatic-proofs 
% Section: predicate-proof-theory

\documentclass[../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{fol}{axp}{prp}

\olsection{Proof Theory of Predicate Logic}

\begin{defn}[Tautological Instance]
  A !!{formula} $!A$ of predicate logic is a \emph{tautological
    instance} if and only if there is a tautology $!B(p_1,\ldots,p_n)$ of
  propositional logic and first-order !!{formula}s
  $!C_1,\ldots,!C_n$ such that $!A =
  \Subst{!B}{!C_1}{p_1},\ldots,\Subst{}{!C_n}{p_n}$. 
\end{defn}

\begin{defn}[Axioms]
  The set \textbf{Ax} of the \emph{Axioms} of predicate logic
  comprises all !!{formula}s obtained by prefixing any number of universal
  quantifiers to the following:
  \begin{description}
  \item[{[\textbf{Ax0}]}] $!A$, where $!A$ is a tautological
    instance;
  \item[{[\textbf{Ax1}]}] $\lforall[x][!B] \lif \Subst{!B}{t}{x}$,
    if $t$ is !!{free for} $x$ in $!B$;
  \item[{[\textbf{Ax2}]}] $\lforall[x][(!A \lif !B)] \lif
    (\lforall[x][!A] \lif \lforall[x][!B])$;
  \item[{[\textbf{Ax3}]}] $!B \lif \lforall[x][!B]$, if $x$ is
    \emph{not} free in $!B$;
  \item[{[\textbf{Ax4}]}] $x \doteq x$;
  \item[{[\textbf{Ax5}]}] $x \doteq y \lif (\Subst{!B}{x}{z}
    \lif \Subst{!B}{y}{z})$, if both $x$ and $y$ are !!{free for}
    $z$ in $!B$.
  \end{description}
\end{defn}

\begin{defn}[Derivations]
A \emph{derivation} from $\Gamma$ is a finite sequence of !!{formula}s,
each
  one of which is either an axiom, or a member of $\Gamma$, or
  obtained by previous !!{formula}s by \emph{modus ponens}. A !!{formula}
  $!A$ is \emph{{!!derivable}} from $\Gamma$, written $\Gamma \Proves
  !A$, if there is a !!{derivation} from $\Gamma$ ending in $!A$. 
\end{defn}

\begin{defn}
  $\mathsf{Thm}_\Gamma = \{ !A :  \Gamma \Proves !A\}$. 
\end{defn}

\begin{prop}
 $\mathsf{Thm}_\Gamma$ is the smallest set of !!{formula}s containing
 $\Gamma$, the axioms, and closed under \emph{modus
   ponens}. Accordingly, we have a principle of proof by
 \emph{induction on the theorem of $\Gamma$}.  
\end{prop}
 
For example, let us show that $\lforall[x][!B] \Proves \lexists[x][!B]$
(where the !!{formula} on the right of the turnstile is just an
abbreviation for $\lnot \lforall[x][\lnot !B]$):

\begin{tabular}{rll}
 1. & $\lforall[x][\lnot !B] \lif \lnot \Subst{!B}{c}{x}$ &
 \textbf{Ax1}: $c$ !!{free for} $x$ in $\lnot !B$ \\
 2. &  $(\lforall[x][\lnot !B] \lif \lnot \Subst{!B}{c}{x}) \lif
 (\Subst{!B}{c}{x} \lif \lnot\lforall[x][\lnot !B]))$ & \textbf{Ax0}\\
 3. & $\Subst{!B}{c}{x} \lif \lnot\lforall[x][\lnot !B]$ & 1, 2, MP\\
 4. & $\lforall[x][!B] \lif \Subst{!B}{c}{x}$ & \textbf{Ax1}: $c$ free
 for $x$ in $!B$ \\
 5. & $\lforall[x][!B]$ & hyp. \\
 6. & $\Subst{!B}{c}{x}$ & 4, 5, MP \\
 7. & $\lnot \lforall[x][\lnot !B]$ & 3, 6, MP
\end{tabular}

\medskip\noindent
Since tautological instances are all axioms, the following proposition
follows immediately by $n$ applications of \emph{modus
  ponens}. Accordingly, from now on we freely employ purely
propositional steps in !!{derivation}s and justify them by reference to
``Proposition T.''

\begin{prop}
  If $\Gamma \Proves !A_1 ,\ldots \Gamma \Proves !A_n$ and
  $!A_1 \lif (!A_2 \lif \cdots \lif(!A_n
  \lif !B) \cdots )$ is a tautological instance, then $\Gamma
  \Proves !B$.
\end{prop}

\begin{proof}
  The !!{formula}   $!A_1 \lif (!A_2 \lif \cdots \lif(!A_n
  \lif !B) \cdots )$ is a tautological instance and hence an
  axiom; $n$ applications of MP give the desired result.
\end{proof}

\begin{explain}
  Since the axioms for predicate logic comprise all the propositional
  axioms, and the only rule (\emph{viz.}, MP) is the same, all the
  propositional proof-theoretic properties such the Deduction Theorem,
  Cut, Monotony, etc., carry over to the predicate case.
\end{explain}

\begin{thm}\ollabel{thm:Generalization}
  (\emph{Generalization}) If $\Gamma \Proves !A$ and $x$ is not free
  in any !!{formula} in $\Gamma$, then $\Gamma \Proves \lforall[x][!A]$.
\end{thm}

\begin{proof}
  By induction on $\mathsf{Thm}_\Gamma$: if $!A$ is an axiom, so
  is $\lforall[x][!A]$. If $!A\in \Gamma$ then $x$ is not free
  in $!A$, so that $!A \lif \lforall[x][!A]$ is an
  axiom (\textbf{Ax3}), and $\Gamma \Proves \lforall[x][!A]$ by
  MP. Now suppose $!A$ follows by MP because $\Gamma \Proves !B$
  and $\Gamma \Proves !B \lif !A$. By induction hypothesis,
  $\Gamma \Proves \lforall[x][!B]$ and $\Gamma \Proves \lforall[x][( !B
  \lif !A)]$. But by \textbf{Ax2} also
  \[
  \Gamma \Proves \lforall[x][( !B \lif !A)] \lif (\lforall[x][
  !B] \lif \lforall[x][!A]),
  \]
and two applications of MP give $\Gamma \Proves \lforall[x][!A]$ as
desired.
\end{proof}

\begin{thm}\ollabel{thm:WeakGen}
  (\emph{Weak Generalization on Constants}) If $\Gamma \Proves !A$
  and $c$ is a !!{constant} not in occurring in $\Gamma$, then there is a
variable $x$ not in $!A$ such that $\Gamma \Proves
\lforall[x][\Subst{!A}{x}{c}]$, and the proof does not involve $c$.
\end{thm}

\begin{proof}
  Let $!A_1,\ldots,!A_n$ be a proof of $!A$ from
  $\Gamma$, so that $!A=!A_n$. Pick a variable $x$ not in
  $!A_1,\ldots,!A_n$, and consider the new sequence:
  $\Subst{!A_1}{x}{c},\ldots,\Subst{!A_n}{x}{c}.$
  Such a sequence is a proof of $\Subst{!A}{x}{c}$ from
  $\Gamma$. In fact, for each $i=1,\ldots,n$:
  \begin{itemize}
  \item if $!A$ is an axiom, then so is $\Subst{!A_i}{x}{c}$;
  \item if $!A_i \in \Gamma$, then since $c$ is not in $\Gamma$,
    we have $\Subst{!A_i}{x}{c} = !A_i \in \Gamma$;
  \item if $!A_i$ is obtained from $!A_j$ and $!A_j
    \lif !A_i$ then $\Subst{!A_i}{x}{c}$ follows by MP
    from  $\Subst{!A_j}{x}{c}$ and $\Subst{(!A_j
    \lif !A_i)}{x}{c} = \Subst{!A_j}{x}{c}
    \lif \Subst{!A_i}{x}{c}$. 
  \end{itemize}
  It is clear that the !!{constant} $c$ no longer occurs in the new
  sequence.  Now let $\Gamma'$ comprise those !!{formula}s from $\Gamma$
  that appear in the !!{derivation} of $\Subst{!A}{x}{c}$; then $x$ is
not free in any !!{formula} in $\Gamma'$ and $\Gamma' \Proves
\Subst{!A}{x}{c}$. By generalization (Theorem
\olref{thm:Generalization}) $\Gamma' \Proves
\lforall[x][\Subst{!A}{x}{c}]$, whence by monotony $\Gamma \Proves
\lforall[x][\Subst{!A}{x}{c}]$, as desired.
\end{proof}

Our goal is to replace the requirement in Theorem \olref{thm:WeakGen}
that $x$ does not occur in $!A$ (at all) by the weaker
requirements that $x$ is not free in $!A$ and it is !!{free for} $c$
in $!A$. Clearly this can be accomplished by a change of bound
!!{variable} --- so that is what we set out to prove first. 

\begin{lem}\ollabel{lem:8.19}
  If $x$ is free for $c$ in $!A$ and $y$ is not free in
  $!A$, then $x$ is !!{free for} $y$ in $\Subst{!A}{y}{c}$.
\end{lem}

\begin{proof}
  If $x$ is not !!{free for} $y$ in $\Subst{!A}{y}{x}$, then some
  free occurrence of $y$ in $\Subst{!A}{y}{c}$ falls within the
  scope of a quantifier $\lforall[x]$. But $y$ is not free in $!A$,
  by hypothesis, so all such occurrences come from the substitution
  $\Subst{}{y}{c}$. So some occurrence of $c$ falls within the scope
  of $\lforall[x]$ and $x$ is not !!{free for} $c$ in $!A$. 
\end{proof}

\begin{lem}\ollabel{lem:ChangeBdVar}
 (\emph{Change of Bound Variable}) If $x$ and $y$ are not
  free in $!A$ and they are both !!{free for} $c$ in $!A$, then
$\Proves \lforall[x][\Subst{!A}{x}{c}] \equiv
\lforall[y][\Subst{!A}{y}{c}]$ (and the proof does not involve $c$).
\end{lem}

\begin{proof}
  From the hypotheses, $y$ is !!{free for} $c$ in $!A$ and $x$ is not
  free in $!A$, so by the previous lemma \olref{lemma:8.19}, $y$ is
!!{free for} $x$ in $\Subst{!A}{x}{c}$. It follows that
$\lforall[x][\Subst{!A}{x}{c} \lif \Subst{!A}{x}{c}
  \Subst{}{y}{x}]$ is an axiom (\textbf{Ax1}). Since $x$ is not free
  in $!A$, we have $\Subst{!A}{x}{c} \Subst{}{y}{x} =
  \Subst{!A}{y}{c}$, so that 
  \[
  \Proves \lforall[x][\Subst{!A}{x}{c}] \lif
  \Subst{!A}{y}{c}, 
  \]
  and by the Deduction Theorem $\lforall[x][\Subst{!A}{x}{c}] \Proves
  \Subst{!A}{y}{c}$. Since $y$ is not free in $!A$, it also
  not free in $\lforall[x][\Subst{!A}{x}{c}]$, so that by
Generalization $\lforall[x][\Subst{!A}{x}{c}] \Proves
\lforall[y][\Subst{!A}{y}{c}]$, and the Deduction Theorem again gives
$\Proves \lforall[x][\Subst{!A}{x}{c}] \lif \lforall[y][\Subst{!A}{y}{c}]$.
  The proof of $\Proves \lforall[y][\Subst{!A}{y}{c}] \lif \lforall[x]
  [\Subst{!A}{x}{c}]$ is perfectly symmetric, so that the
  conclusion follows by Proposition T.
\end{proof}

\begin{thm}\ollabel{thm:StrongGen}
  (\emph{Strong Generalization on Constants}) If $\Gamma \Proves
  !A$, the !!{constant} $c$ does not occur in $\Gamma$, and $x$ is
  not free in $!A$ but it is !!{free for} $c$ in $!A$, then
  $\Gamma \Proves \lforall[x][\Subst{!A}{x}{c}]$.
\end{thm}

\begin{proof}
  Since $\Gamma \Proves !A$ and $c$ is not in $\Gamma$, then by
  Weak Generalization there is !!a{variable} $y$ not in $!A$ such
  that $\Gamma \Proves \lforall[y][\Subst{!A}{y}{c}]$. Since $y$ is not
  in $!A$ (at all), it is not free in $!A$ and it is also
  !!{free for} $c$ in $!A$; if moreover (by hypothesis) $x$ is not
  free in $!A$ and !!{free for} $c$ in $!A$, then the
  requirements for a change of bound !!{variable} are met, so $\Proves
  \lforall[x][\Subst{!A}{x}{c}] \equiv \lforall[y][\Subst{!A}{y}{c}]$,
  whence $\Gamma \Proves \lforall[x][\Subst{!A}{x}{c}]$.
\end{proof}

We conclude this section by collecting facts about identity.

\begin{prop}\ollabel{prop:iden1}
 $\Gamma \Proves t \doteq t$, for any term $t$ and set
  $\Gamma$.
\end{prop}

\begin{proof}
  $\lforall[x][(x \doteq x)]$ is an axiom, and any term $t$ is free for
  $x$ in $x \doteq x$. 
\end{proof}

\begin{prop}\ollabel{prop:iden2}
  If $\Gamma \Proves \Subst{!A}{t}{z}$ and $\Gamma \Proves t \doteq
  t'$, and both $t$ and $t'$ are !!{free for} $x$ in $!A$, then
  $\Gamma \Proves \Subst{!A}{t'}{z}]$.  
\end{prop}

\begin{proof}
  Pick !!{variable}s $x$ and $y$ not occurring $!A$, $t$, or $t'$ (at
  all). Then 
  \[
  \lforall[x]\lforall[y][(x \doteq y \lif (\Subst{!A}{x}{z}] \lif
  \Subst{!A}{y}{z})) 
  \]
  is an axiom (\textbf{Ax5}), since $x$ and $y$ are !!{free for} $z$ in
  $!A$. By \textbf{Ax1} and MP (twice), $\Gamma \Proves (t \doteq t'
  \lif (\Subst{!A}{t}{z} \lif \Subst{!A}{t'}{z}))$, whence the
  conclusion follows by two further applications of MP. 
\end{proof}

\end{document}
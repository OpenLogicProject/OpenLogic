% Part: incompleteness
% Chapter: arithmetization-syntax
% Section: coding-formulas

\documentclass[../../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{inc}{art}{frm}
\olsection{Coding \printtoken{P}{formula}}

\begin{prop}
The relation $\fn{Atom}(x)$ which holds iff $x$ is the G\"odel number
of an atomic !!{formula}, is primitive recursive.
\end{prop}

\begin{proof}
The number $x$ is the G\"odel number of an atomic !!{formula} iff
one of the following holds:
\begin{enumerate}
\item There are $n$, $j < x$, and $z < x$ such that for each $i < n$,
  $\fn{Term}((z)_i)$ and $x = $
\[
\Gn{\Obj P^n_j(} \concat \fn{flatten}(z) \concat \Gn{)}.
\]
\item There are $z_1, z_2 < x$ such that $\fn{Term}(z_1)$,
  $\fn{Term}(z_2)$, and $x = $
\[
\Gn{{\eq}(} \concat z_1 \concat \Gn{,} \concat z_2 \concat{\Gn{)}}.
\]
  \tagitem{prvFalse}{$x = \Gn{\lfalse}$.}{}
  \tagitem{prvTrue}{$x = \Gn{\ltrue}$.}{}
\end{enumerate}
\end{proof}

\begin{prop}
\ollabel{prop:frm-primrec}
The relation $\fn{Frm}(x)$ which holds iff $x$ is the G\"odel number
of !!a{formula} is primitive recursive.
\end{prop}

\begin{proof}
A sequence of symbols~$s$ is !!a{formula} iff there is formation
sequence~$s_0$, \dots, $s_{k-1} = s$ of !!{formula} which records
how~$s$ was formed from atomic !!{formula}s according to the
formation rules.  The code for each $s_i$ (and indeed of the code of
the sequence $\tuple{s_0, \dots, s_{k-1}}$) is less than the code~$x$
of~$s$.
\end{proof}

\begin{prob}
Give a detailed proof of \olref[inc][art][frm]{prop:frm-primrec} along
the lines of the first proof of
\olref[inc][art][trm]{prop:term-primrec}
\end{prob}

\begin{prob}
Give a detailed proof of \olref[inc][art][frm]{prop:frm-primrec} along
the lines of the alternate proof of
\olref[inc][art][trm]{prop:term-primrec}
\end{prob}

\begin{prop}
\ollabel{prop:freeocc-primrec}
The relation $\fn{FreeOcc}(x, z, i)$, which holds iff the $i$-th
symbol of the formula with G\"odel number~$x$ is a free occurrence of
the variable with G\"odel number~$z$, is primitive recursive.
\end{prop}

\begin{proof}
Exercise.
\end{proof}

\begin{prob}
Prove \olref[inc][art][frm]{prop:freeocc-primrec}.  You may make use
of the fact that any substring of !!a{formula} which is !!a{formula}
is a sub-!!{formula} of it.
\end{prob}

\begin{prop}
The property $\fn{Sent}(x)$ which holds iff $x$~is the G\"odel
number of a !!{sentence} is primitive recursive.
\end{prop}

\begin{proof}
A !!{sentence} is !!a{formula} without free occurrences of
!!{variable}s. So $\fn{Sent}(x)$ holds iff
\begin{multline*}
\bforall{i<\len{x}}{\bforall{z<x}{}}\\
(\bexists{j<z}{z=\Gn{\Obj v_j}} \lif \lnot\fn{FreeOcc}(x,z,i)).
\end{multline*}
\end{proof}


\end{document}

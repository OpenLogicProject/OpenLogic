% Part: lambda-calculus
% Chapter: representability
% Section: primitive-recursive-functions

\documentclass[../../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{lc}{rep}{prim}
\olsection{Primitive recursive functions}

In this section we will give representation of primitive recursive
functions which is relatively easier as they are all total, thus we don't have to worry about cases where they are
undefined.

\begin{prop}
  Every primitive recursive function is representable.
\end{prop}
\begin{proof}
  For each primitive recursive functions, Prove by induction on
  the formation of it:
  \begin{enumerate}
  \item If it is just a basic recursive function, it is representable by
    \olref{lem:basic}
  \item If it is formed by composition, with the inductive hypothesis that all
    subroutine primitive recursive functions, we
    conclude that the composition is also representable by
    \olref{lem:comp}
  \item If it is formed by primitive recursion, with the inductive hypothesis that the
    two subroutine primitive recursive functions is representable, the
    primitive recursion is also representable, by \olref{lem:prim}
  \end{enumerate}
\end{proof}

Now we prove the lemmas used in the above proof:

\begin{lem}\ollabel{lem:basic}
  Basic primitive recursive functions, including zero, successor and
  projection are representable.
\end{lem}
\begin{proof}
  They can be represented as follows:
  \begin{align*}
    \num{0} &\eqs \lambd[fx][x]\\
    \num{S} &\eqs \lambd[n][\lambd[fx][n f (f x)]] \\
    \num{P^n_i} &\eqs \lambd[x_0\dots x_{n-1}][x_i] \\
  \end{align*}

  We omit the proof of justifying the above representations as it should
  be immediate.
\end{proof}

\begin{lem}\ollabel{lem:comp}
  Given the representation of $f$, an $k$-ary total function and $g_0,
  \dots, g_{k-1}$, some $l$-ary functions, the composition $h$, an
  $l$-ary, the composition $h$, and $l$-ary function is also representable.
\end{lem}
Note that in the above proposition all subroutine functions don't have
to be primitive recursive: total is enough. By loosening the premise
of the proposition, we get a stronger proposition (which should be no harder
to prove) that will be used again in next section.

\begin{proof}
  $h$ can be represented as follows:
  \begin{align}
    \num{h} &\eqs \lambd[x_0 \dots x_{l-1}][\num{f} (\num{g_0} x_0 \dots
              x_{l-1}) \dots (\num{g_{k-1}} x_0 \dots x_{l-1})]
  \end{align}

  The rest of the proof is left to the reader.
\end{proof}

\begin{prob}
  Justify the above representation; you only have to consider the
  cases where all subroutine functions are defined as they are primitive
  recursive.
\end{prob}

Now we try to represent primitive recursion; again,
$g$ and $f$ does not have to be primitive recursive - they are just
total.
\begin{lem}\ollabel{lem:prim}
  Given $\num{f},\num{g}$ as representation of two total
  functions $g,f$ respectively, the primitive recursion defined by
  these two functions is also representable.
\end{lem}
\begin{proof}
  Recall that a primitive recursion $h$ is defined from a $k$-ary function $f$ and a $k+2$-ary function
  $g$; informally speaking, the recursion is basically a iteration
  maintaining two things: the current $x$ and current value of $h$. This
  reminds us of the definition of church numerals, which is defined as a
  iterator. Here comes the representations($z$ is abbreviation for $z_0
  \dots z_{k-1}$ for simplicity):
  \begin{align*}
    \num{h} &\eqs \lambd[x][\lambd[z][fst (x (\lambd[p].\tuple{succ (fst ~ p),
              (\num{g} (fst ~ p) (snd ~ p) z)}) \tuple{\num{0}, \num{f} z})]]
  \end{align*}
  The iteration state we maintain is a pair, the first of which is the
  current $x$ and the second is current $h$ value. For every step of
  iteration we create a pair of new values of $x$ and $h$; after the
  iteration is done we return the second part of the pair and that's the
  final $h$ value. We now prove this is indeed a representation of
  primitive recursion.

  We want to prove that for any $x$ and $z$, $\num{h(x,z)} = \num{h}
  \num{x} \num{z}$. By induction on $x$.

  If $x$ is zero, we want $\num{h(0,z)} = \num{h} \num{0} \num{z}$,
  which is $\num{f(z)} = \num{f} \num{z}$, which holds by definition
  of $\num{f}$.
  
  If $x$ is $x'+1$, then
  \begin{align*}
    &\num{h(x'+1,z)} = \num{h} \num{x'+1} \num{z} \\
    \Leftarrow & \num{g(x',h(x',z),z)} = \num{g} \num{x'} (\num{h}
                 \num{x'} \num{z}) \num{z} \\
    \Leftarrow & \num{g} \num{x'} \num{h(x',z)} \num{z} = \num{g}
                 \num{x'} (\num{h}, \num{x'}, \num{z}) \num{z} \\
    \Leftarrow & \num{h(x',z)} = \num{h} \num{x'} \num{z}
  \end{align*}
  The last of which is exactly the inductive hypothesis.
\end{proof}
\end{document}


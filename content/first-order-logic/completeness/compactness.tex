% Part: first-order-logic
% Chapter: completeness
% Section: compactness

\documentclass[../../../include/open-logic-section]{subfiles}

\begin{document}

\iftag{FOL}
      {\olfileid{fol}{com}{com}}
      {\olfileid{pl}{com}{com}}

\olsection{The Compactness Theorem}

One important consequence of the completeness theorem is the
compactness theorem.  The compactness theorem states that if each
\emph{finite} subset of a set of !!{sentence}s is satisfiable, the
entire set is satisfiable---even if the set itself is infinite. This
is far from obvious. There is nothing that seems to rule out, at first
glance at least, the possibility of there being infinite sets of
!!{sentence}s which are contradictory, but the contradiction only
arises, so to speak, from the infinite number.  The compactness
theorem says that such a scenario can be ruled out: there are no
unsatisfiable infinite sets of !!{sentence}s each finite subset of
which is satisfiable. Like the completeness theorem, it has a version
related to entailment: if an infinite set of !!{sentence}s entails
something, already a finite subset does.

\begin{defn}
  A set $\Gamma$ of !!{formula}s is \emph{finitely satisfiable} iff every finite $\Gamma_0 \subseteq \Gamma$ is satisfiable.
\end{defn}

\begin{thm}[Compactness Theorem]
\ollabel{thm:compactness}
The following hold for any sentences $\Gamma$ and $!A$:
\begin{enumerate}
  \item $\Gamma \Entails !A$ iff there is a finite $\Gamma_0
    \subseteq \Gamma$ such that $\Gamma_0 \Entails !A$.
  \item $\Gamma$ is satisfiable iff it is finitely
    satisfiable.
\end{enumerate}
\end{thm}

\begin{proof}
We prove (2).  If $\Gamma$ is satisfiable, then there is
\iftag{FOL}{!!a{structure}~$\Struct{M}$}{!!a{valuation}~$\pAssign{v}$}
such that $\iftag{FOL}{\Sat{M}}{\pSat{v}}{!A}$ for all $!A \in
\Gamma$.  Of course, this $\iftag{FOL}{\Struct{M}}{\pAssign{v}}$ also
satisfies every finite subset of~$\Gamma$, so $\Gamma$ is finitely
satisfiable.

Now suppose that $\Gamma$ is finitely satisfiable.  Then every finite
subset~$\Gamma_0 \subseteq \Gamma$ is satisfiable.  By soundness
(\iftag{FOL}{%
  \tagrefs{prfAX/{fol:axd:sou:cor:consistency-soundness},
    prfSC/{fol:seq:sou:cor:consistency-soundness},
    prfND/{fol:ntd:sou:cor:consistency-soundness},
    prfTab/{fol:tab:sou:cor:consistency-soundness}}}{%
  \tagrefs{prfAX/{pl:axd:sou:cor:consistency-soundness},
    prfSC/{pl:seq:sou:cor:consistency-soundness},
    prfND/{pl:ntd:sou:cor:consistency-soundness},
    prfTab/{pl:tab:sou:cor:consistency-soundness}}}),
every finite subset is consistent.  Then $\Gamma$ itself must be
consistent by
\iftag{FOL}{%
  \tagrefs{prfAX/{fol:axd:ptn:prop:proves-compact},
    prfSC/{fol:seq:ptn:prop:proves-compact},
    prfND/{fol:ntd:ptn:prop:proves-compact},
    prfTab/{fol:tab:ptn:prop:proves-compact}}}{%
  \tagrefs{prfAX/{pl:axd:ptn:prop:proves-compact},
    prfSC/{pl:seq:ptn:prop:proves-compact},
    prfND/{pl:ntd:ptn:prop:proves-compact},
    prfTab/{pl:tab:ptn:prop:proves-compact}}}.
By completeness (\olref[cth]{thm:completeness}), since $\Gamma$~is
consistent, it is satisfiable.
\end{proof}

\tagprob{FOL}
\begin{prob}
Prove (1) of \olref[fol][com][com]{thm:compactness}.
\end{prob}
\tagendprob

\tagprob{notFOL}
\begin{prob}
Prove (1) of \olref[pl][com][com]{thm:compactness}.
\end{prob}
\tagendprob

\iftag{FOL}{%
\begin{ex}
In every model~$\Struct{M}$ of a theory~$\Gamma$, each term~$t$ of
course picks out !!a{element} of~$\Domain{M}$. Can we guarantee that
it is also true that every !!{element} of~$\Domain{M}$ is picked out
by some term or other? In other words, are there theories~$\Gamma$ all
models of which are covered?  The compactness theorem shows that this
is not the case if $\Gamma$ has infinite models. Here's how to see
this: Let $\Struct{M}$ be an infinite model of~$\Gamma$, and let $c$
be !!a{constant} not in the language of~$\Gamma$. Let $\Delta$ be the
set of all sentences $\eq/[c][t]$ for $t$ a term in the
language~$\Lang{L}$ of~$\Gamma$, i.e.,
  \[
  \Delta = \Setabs{\eq/[c][t]}{t \in \Trm[L]}.
  \]
A finite subset of $\Gamma \cup \Delta$ can be written as $\Gamma'
\cup \Delta'$, with $\Gamma' \subseteq \Gamma$ and $\Delta' \subseteq
\Delta$. Since $\Delta'$ is finite, it can contain only finitely many
terms. Let $a \in \Domain{M}$ be !!a{element} of $\Domain{M}$ not
picked out by any of them, and let $\Struct{M'}$ be the !!{structure}
that is just like $\Struct{M}$, but also $\Assign{c}{M'} = a$. Since
$a \neq \Value{t}{M}$ for all~$t$ occurring in~$\Delta'$,
$\Sat{M'}{\Delta'}$. Since $\Sat{M}{\Gamma}$, $\Gamma' \subseteq
\Gamma$, and $c$ does not occur in~$\Gamma$, also
$\Sat{M'}{\Gamma'}$. Together, $\Sat{M'}{\Gamma' \cup \Delta'}$ for
every finite subset $\Gamma' \cup \Delta'$ of $\Gamma \cup \Delta$. So
every finite subset of $\Gamma \cup \Delta$ is satisfiable. By
compactness, $\Gamma \cup \Delta$ itself is satisfiable. So there are
models~$\Sat{M}{\Gamma \cup \Delta}$. Every such $\Struct{M}$ is a
model of~$\Gamma$, but is not covered, since $\Value{c}{M} \neq
\Value{t}{M}$ for all terms~$t$ of~$\Lang{L}$.
\end{ex}

\begin{ex}
Consider !!a{language} $\Lang{L}$ containing the !!{predicate}~$<$,
!!{constant}s $\Obj{0}$, $\Obj{1}$, and !!{function}s $+$, $\times$, and
$-$. Let $\Gamma$ be the set of all !!{sentence}s in this
!!{language} true in the !!{structure}~$\Struct{Q}$ with domain~$\Rat$ and the obvious
interpretations.  $\Gamma$~is the set of all !!{sentence}s
of~$\Lang{L}$ true about the rational numbers. Of course, in~$\Rat$
(and even in~$\Real$), there are no numbers~$r$ which are greater than~$0$
but less than $1/k$ for all $k \in \PosInt$.  Such a number, if it
existed, would be an \emph{infinitesimal:} non-zero, but infinitely
small.  The compactness theorem can be used to show that there are 
models of~$\Gamma$ in which infinitesimals exist. We do not have 
!!a{function} for division in our language (division by zero is 
undefined, and !!{function}s have to be interpreted by total functions).
However, we can still express that $r < 1/k$, since this is the case iff
$r \cdot k < 1$. Now let $c$ be a new !!{constant} and let $\Delta$ be 
\[
\{\Obj{0} < c\}
\cup \Setabs{ c \times \num k < \Obj{1} }{k \in \PosInt}
\]
(where $\num{k} = (\Obj{1} + (\Obj{1} + \dots + (\Obj{1} +
\Obj{1})\dots))$ with $k$~$\Obj{1}$'s). For any finite
subset~$\Delta_0$ of~$\Delta$ there is a~$K$ such that for all the
!!{sentence}s $c \times \num{k} < \Obj{1}$ in~$\Delta_0$ have $k < K$.
If we expand $\Struct{Q}$ to~$\Struct{Q'}$ with $\Assign{c}{Q'} = 1/K$
we have that $\Sat{Q'}{\Gamma_0 \cup \Delta_0}$ for any finite
$\Gamma_0 \subseteq \Gamma$, and so $\Gamma \cup \Delta$ is finitely
satisfiable (Exercise: prove this in detail). By compactness, $\Gamma
\cup \Delta$ is satisfiable. Any model~$\Struct{S}$ of $\Gamma \cup
\Delta$ contains an infinitesimal, namely~$\Assign{c}{S}$.
\end{ex}
}{}

\tagprob{FOL}
\begin{prob}
In the standard model of arithmetic~$\Struct{N}$, there is no
!!{element}~$k \in \Domain{N}$ which satisfies every formula~$\num{n}
< x$ (where $\num{n}$ is $\Obj{0}^{\prime\dots\prime}$ with $n$
$\prime$'s).  Use the compactness theorem to show that the set of
!!{sentence}s in the language of arithmetic which are true in the standard
model of arithmetic $\Struct{N}$ are also true in
!!a{structure}~$\Struct{N'}$ that contains !!a{element} which
\emph{does} satisfy every formula $\num{n} < x$.
\end{prob}
\tagendprob

\iftag{FOL}{
\begin{ex}
We know that first-order logic with !!{identity} can express that the
size of the !!{domain} must have some minimal size: The
sentence~$!A_{\ge n}$ (which says ``there are at least $n$ distinct
objects'') is true only in structures where $\Domain{M}$ has at
least~$n$ objects. So if we take
  \[
  \Delta = \Setabs{!A_{\ge n}}{n \ge 1}
  \]
then any model of $\Delta$ must be infinite. Thus, we can guarantee
that a theory only has infinite models by adding~$\Delta$ to it: the
models of $\Gamma \cup \Delta$ are all and only the infinite models
of~$\Gamma$.

So first-order logic can express infinitude. The compactness theorem
shows that it cannot express finitude, however. For suppose some set
of sentences $\Lambda$ were satisfied in all and only finite
!!{structure}s. Then $\Delta \cup \Lambda$ is finitely
satisfiable. Why? Suppose $\Delta' \cup \Lambda' \subseteq \Delta \cup
\Lambda$ is finite with $\Delta' \subseteq \Delta$ and $\Lambda'
\subseteq \Lambda$. Let $n$ be the largest number such that $!A_{\ge n}
\in \Delta'$. $\Lambda$, being satisfied in all finite structures, has
a model~$\Struct{M}$ with finitely many but $\ge n$ !!{element}s. But
then $\Sat{M}{\Delta' \cup \Lambda'}$.  By compactness, $\Delta \cup
\Lambda$ has an infinite model, contradicting the assumption that
$\Lambda$ is satisfied only in finite !!{structure}s.
\end{ex}
}{}

\end{document}

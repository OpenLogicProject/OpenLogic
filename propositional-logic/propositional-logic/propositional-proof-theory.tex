% Part: propositional-logic 
% Chapter: propositional-logic 
% Section: propositional-proof-theory

\documentclass[../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{prp}{prp}{prp}

\olsection{Proof Theory for Propositional Logic}

\begin{defn}[Axioms]
  The set of \textbf{Ax} of the \emph{Axioms} of propositional logic
  comprises all !!{formula}s of the following forms:
  \begin{description}
  \item[{[Ax1]}] $!A \lif (!B \lif !A)$;
  \item[{[Ax2]}] $(!A \lif (!B \lif !C)) \lif
    ((!A \lif !B) \lif (!A \lif !C))$;
  \item[{[Ax3]}] $(\lnot !A \lif \lnot !B) \lif (!B
    \lif !A)$.
  \end{description}
\end{defn}

\begin{defn}[!!^{derivability}]
  If $\Gamma$ is a set of !!{formula}s of $\Lang L_0$ and $!A$ a
!!{formula}, then a \emph{!!{derivation}} of $!A$ from $\Gamma$ is a finite
sequence $!A_1,\ldots, !A_n$ of !!{formula}s such that
  $!A_n = !A$ and for each $i\le n$ one of the following
  holds:
  \begin{itemize}
  \item $!A_i \in \Gamma$; or
  \item $!A_i$ is an axiom; or
  \item there are $j,k<i$ that $!A_j$ is $!A_k \lif
    !A_i$.
  \end{itemize}
\end{defn}

\begin{explain}
The last clause just says that $!A_i$ can be obtained from
previously occurring $!A_k$ and $!A_k \lif !A_i$ by
\emph{modus ponens} (MP).  We write $\Gamma \Proves !A$
(``$\Gamma$ !!{derive}s $!A$,'' or ``$!A$ is !!{derivable} from
$\Gamma$'') to mean that there is a !!{derivation} of $!A$ from
$\Gamma$. When $\Gamma$ is empty, we write $\Proves !A$ to mean
$\varnothing \Proves !A$.
\end{explain}

\begin{prop}\ollabel{prop:easyproofs}
 The following are !!{derivable}:
  \begin{enumerate}
  \item \emph{Transitivity}: $\{!A\lif !B, !B\lif !C\} \Proves
    !A\lif!C$\ollabel{prop:easyproofs:trans}
  \item $\Proves !A \lif !A$. \ollabel{prop:easyproofs:refl}
  \end{enumerate}
\end{prop}

\begin{proof}
  For part \olref{prop:easyproofs:trans}, the following instances
  of \textbf{Ax1.} and \textbf{Ax2.} are needed:
  \begin{eqnarray*}
    &&(!B \lif !C) \lif (!A \lif (!B \lif !C)); \\
    && (!A \lif (!B \lif !C)) \lif ((!A \lif !B) \lif
    (!A \lif !C)).
  \end{eqnarray*}
For part \olref{prop:easyproofs:refl}, consider the instance of
\textbf{Ax1.}: $!A \lif ((!A \lif !A) \lif
!A)$ and distribute the outermost implication by \textbf{Ax2.}
\end{proof}

\begin{prop}\ollabel{prop:contain}
  For any set $\Gamma$ of !!{formula}s:
  \begin{enumerate}
  \item If $!A$ is an axiom then $\Gamma \Proves !A$;
  \item If $!A$ is in $\Gamma$ then $\Gamma \Proves
    !A$;\ollabel{prop:contain:reflex}
  \item \emph{Monotony}: if $\Gamma \subseteq \Delta$ and $\Gamma
    \Proves !A$ then also $\Delta \Proves
    !A$;\ollabel{prop:contain:monotony} 
  \item $\Gamma \Proves !A$ if and only if there is a
    \emph{finite} !!{subset} $\Gamma_0$ of $\Gamma$ such that $\Gamma_0
    \Proves !A$.
  \end{enumerate}
\end{prop}

\begin{thm}
  Let $\mathsf{Thm}(\Gamma) = \{!A : \Gamma \Proves
  !A\}$. Then $\mathsf{Thm}(\Gamma)$ is the smallest set of
  formulas containing the axioms, every !!{formula} in $\Gamma$, and
  closed under \emph{modus ponens} (from $!A$ and $!A
  \lif !B$ infer $!B$).
\end{thm} 

\begin{proof}
  We know from Proposition \olref{prop:contain} that
  $\mathsf{Thm}(\Gamma)$ has the desired properties; so we need to
  show that it is the smallest such. Let $A$ be any other set of
  !!{formula}s containing the axioms and $\Gamma$ and closed under
  \emph{modus ponens}. Prove that $\mathsf{Thm}(\Gamma) \subseteq A$
  by induction on the length of a proof of $!A$ from $\Gamma$.
\end{proof}

\begin{cor}\ollabel{cor:induction-thms}
  \emph{Principle of induction on theorems}: any property $P$ that
  holds of the axioms, of !!{formula}s in $\Gamma$, and is preserved by
  \emph{modus ponens} holds of every !!{formula} in
  $\mathsf{Thm}(\Gamma)$.
\end{cor}

\begin{thm}\ollabel{thm:deduction-thm}
  \emph{Deduction Theorem}: $\Gamma \cup \{!A\} \Proves !B$ if
  and only if $\Gamma \Proves !A \lif !B$.
\end{thm}
\begin{proof}
  The ``if'' direction is immediate; if $\Gamma \Proves !A \lif
  !B$ then also $\Gamma \cup \{!A\}\Proves !A \lif
  !B$, so there is !!a{derivation} of $!A\lif !B$ from $\Gamma \cup
  \{!A\}$, and one more application of \emph{modus ponens} gives
  $\Gamma \cup \{!A\} \Proves !B$.

  For the converse, proceed by induction on theorems. If $!B \in
  \Gamma$ or $!B$ is an axiom then also $\Gamma \Proves !B \lif
  (!A \lif !B)$ by \textbf{Ax1}, and \emph{modus ponens}
  gives $\Gamma\cup \Proves !A \lif !B$; and if $!B \in \{
  !A\}$ then $\Gamma \Proves !A \lif !B$ because the
  last !!{sentence} is the same as $!A \lif !A$.

  For the inductive step, suppose $!B$ is obtained by \emph{modus
    ponens} from $!C \lif !B$ and $!C$. Then $\Gamma \cup
  \{ !A\} \Proves !C \lif !B$ and $\Gamma \cup \{
  !A\} \Proves !C$. By inductive hypothesis, both 
  \begin{align*}
   & \Gamma \Proves !A \lif (!C \lif !B); \\
   & \Gamma \Proves !A \lif !C.
  \end{align*}
But also
\[
\Gamma \Proves (!A \lif (!C \lif !B)) \lif
((!A\lif !C)  \lif (!A \lif !B)),
\]
by \textbf{Ax2}, and two applications of \emph{modus ponens} give
$\Gamma \Proves !A \lif !B$, as required.
\end{proof}

Notice how \textbf{Ax1} and \textbf{Ax2} were chosen precisely so that
the Deduction Theorem would hold. The following proposition collects
useful facts about !!{derivability} that will be needed in the next
section.

\begin{prop}\ollabel{prop:derivfacts}
  The following are all !!{derivable}:
  \begin{enumerate}
  \item $\Proves (!A \lif !B) \lif ((!B \lif !C)
    \lif (!A \lif !C)$; \ollabel{derivfacts:a}
  \item \emph{Contraposition}: if $\Gamma \cup \{ \lnot !A\}
    \Proves \lnot !B$ then $\Gamma \cup \{ !B\} \Proves
    !A$; \ollabel{derivfacts:b}
  \item \emph{Ex Falso Quodlibet}: $\{ !A, \lnot!A\} \Proves
    !B$; \ollabel{derivfacts:c}
  \item \emph{Double Negation}: $\{ \lnot\lnot!A\} \Proves
    !A$;\ollabel{derivfacts:d}
  \item if $\Gamma \Proves \lnot\lnot!A$ then $\Gamma \Proves
    !A$;\ollabel{derivfacts:e}
\end{enumerate}
\end{prop}


\begin{proof}
Part \olref{derivfacts:a} follows from Prop. \olref{prop:easyproofs}, part
\olref{prop:easyproofs:trans} by two applications of the Deduction
Theorem. For part \olref{derivfacts:b}:

\begin{tabular}{rll}
  1. & $\Gamma \cup \{ \lnot !A\} \Proves \lnot !B$ & hyp. \\
  2. & $\Gamma \cup \Proves \lnot !A \lif \lnot !B$ & Ded. Thm.\\
  3. & $\Gamma \Proves (\lnot !A \lif \lnot !B) \lif (!B
  \lif !A)$ & \textbf{Ax3.} and monotony \\
  4. & $\Gamma \Proves !B \lif !A$ & MP \\
  5. & $\Gamma \cup \{ !B\} \Proves !A$ & Ded. Thm.
\end{tabular}
  
\noindent For part \olref{derivfacts:c} we have $\{\lnot !A,
\lnot !B \} \Proves \lnot !A$ by Prop \olref{prop:contain}, part
\olref{prop:contain:reflex}, and $\{ !A, \lnot!A\} \Proves
!B$ follows by \olref{derivfacts:b}. Part  \olref{derivfacts:d}: since
$\{\lnot\lnot !A, \lnot !A \} \Proves \lnot \lnot\lnot
!A$ by \emph{ex falso quodlibet}, apply  \olref{derivfacts:b}. Now
for part  \olref{derivfacts:e}, $\Gamma \Proves \lnot\lnot !A
\supset !A$ by the previous part, the deduction theorem, and
monotony, so if $\Gamma \Proves \lnot\lnot!A$ also $\Gamma \Proves
!A$ by MP. 
\end{proof}

\begin{thm}
  \emph{Cut:} if $\Gamma \Proves !A$ and $\Delta, !A \Proves
  !C$ then $\Gamma \cup \Delta \Proves !C$. 
\end{thm}

\begin{proof}
The following shows that the conclusion is !!{derivable}:

\begin{tabular}{rll}
1. & $\Gamma \Proves !A$ & hyp. \\
2. & $\Gamma\cup\Delta \Proves !A$ & monotony, 1.\\
3. & $\Delta, !A \Proves !C$ & hyp. \\
4. & $\Gamma \cup \Delta, !A \Proves !C$ & monotony, 3.\\
5. & $\Gamma \cup \Delta \Proves !A \lif !C$ & Ded. Thm., 4.\\
6. &  $\Gamma \cup \Delta \Proves !C$ & MP 2, 5.
\end{tabular}

\smallskip\noindent
``Monotony'' refers to Prop. \olref{prop:contain}, part
\olref{prop:contain:monotony}.
\end{proof}

\begin{def}\ollabel{def:trivial}
  $!A \lif !B, !A \Proves !B$.
\end{def}

\begin{proof}
  Clearly $!A \lif !B \Proves !A\lif !B$. Apply the
  Deduction Theorem.
\end{proof}

\begin{def}\ollabel{def:notphi}
  $!A \lif \lnot !A \Proves \lnot !A$.
\end{def}

\begin{proof} The following shows the conclusion is !!{derivable}.
  
  \begin{tabular}{rll}
    1. & $\lnot\lnot!A \Proves !A$ & Double negation \\
    2. & $\lnot\lnot \lnot\lnot!A \Proves \lnot\lnot!A$
    & Double negation \\ 
    3. & $\lnot\lnot(!A \lif \lnot !A) \Proves !A
    \lif \lnot !A$ & Double negation\\
    4. & $\lnot!A \Proves \lnot\lnot\lnot !A$ &
    contraposition, 2\\ 
    5. & $\lnot\lnot(!A \lif \lnot !A), !A
    \Proves \lnot !A$ & Deduction theorem, 3 \\
    6. & $\lnot\lnot!A, \lnot\lnot(!A \lif \lnot
    !A) \Proves  \lnot !A$ & Cut, 1, 5 \\
    7. &  $\lnot\lnot!A, \lnot\lnot(!A \lif \lnot
    !A) \Proves  \lnot\lnot\lnot !A$ & Cut 4, 6 \\
    8. & $\lnot \lnot !A \Proves \lnot (!A \lif \lnot
    !A)$ & Contraposition, 7 \\
    9. & $(!A \lif \lnot !A) \Proves \lnot !A$ &
    contraposition, 8. 
 \end{tabular}

\end{proof}



\begin{prop} \ollabel{prop:consistent} 
The following hold:
  \begin{enumerate}
  \item $!B \Proves \lnot \lnot !B$\ollabel{prop:consistent:0}
  \item $!A \lif \lnot !B, !B \Proves \lnot!A$
     \ollabel{prop:consistent:1}
  \item $!A\lif !B,!A\lif\lnot !B  \Proves
    \lnot!A$.    \ollabel{prop:consistent:2}
  \item if $\Gamma \cup \{ !A \}\Proves !B$ and $\Gamma
    \cup \{ !A\} \Proves \lnot !B$ then $\Gamma \Proves
    \lnot!A$.    \ollabel{prop:consistent:3}
  \end{enumerate}
\end{prop}

\begin{proof}
For part \olref{prop:consistent:0}, we have $\lnot\lnot\lnot!B
\Proves \lnot !B$ by double negation, whence  $!B \Proves \lnot
\lnot !B$ by Prop. \olref{prop:derivfacts}, part
\olref{derivfacts:b}.  For part \olref{prop:consistent:1} we have:

\begin{tabular}{rll}
 1. & $\Proves (\lnot\lnot !A \lif \lnot\lnot\lnot !B)
 \lif (\lnot\lnot !B \lif \lnot !A)$ & \textbf{Ax3} \\
 2. & $\lnot\lnot !A \lif \lnot\lnot\lnot !B,
 \lnot\lnot !B \Proves \lnot!A$ & 1, Ded. Thm., twice \\ 
 3. & $!B \Proves \lnot\lnot !B$ & Double Neg. \\
 4. & $\lnot\lnot !A \lif \lnot\lnot\lnot !B,
  !B \Proves \lnot!A$ & 2, 3, Cut \\
 5. & $\lnot !B \lif \lnot\lnot\lnot !B, !A\lif
 \lnot !B \Proves !A \lif \lnot\lnot\lnot!B$ &
 Transitivity (Prop. \olref{prop:easyproofs}, part
 \olref{prop:easyproofs:trans}) \\
 6. & $\Proves \lnot!B \lif \lnot\lnot\lnot!B$ & Double
 Neg. + Ded. Thm. \\
 7. & $!A\lif \lnot !B \Proves !A \lif
 \lnot\lnot\lnot !B$ & 5, 6, Cut \\
 8. & $\Proves \lnot\lnot !A \lif !A$ & Double. Neg +
 Ded. Thm. \\
 9. & $\lnot\lnot!A \lif !A, !A \lif
 \lnot\lnot\lnot !B \Proves \lnot\lnot !A \lif
 \lnot\lnot\lnot !B$ & Transitivity \\
 10. & $!A \lif \lnot\lnot\lnot !B \Proves
 \lnot\lnot!A \lif \lnot\lnot\lnot!B$ & 8, 9, Cut \\
 11. & $!A \lif \lnot!B \Proves \lnot\lnot !A\lif
 \lnot\lnot\lnot!B$ & 7, 10, Cut \\
 12. & $!A \lif \lnot !B, !B \Proves \lnot !A$ & 4,
 11, Cut.
\end{tabular}

\smallskip\noindent 
Part \olref{prop:consistent:2} follows because:

\begin{tabular}{rll}
  1. & $!A \lif !B, !A \Proves !B $ &lemma \olref{lemma:trivial} \\
  2. & $ !A \lif \lnot !B, !B \Proves \lnot!A$ & part
  \olref{prop:consistent:1} \\ 
  3. & $!A \lif !B, !A \lif \lnot !B, !A
  \Proves \lnot !A$ & 1, 2, Cut. \\
  4. &  $!A \lif !B, !A \lif \lnot !B
  \Proves  !A\lif \lnot !A$ & deduction theorem \\
  5. &  $!A \lif \lnot !A \Proves \lnot !A$   &
  lemma \olref{lemma:notphi} \\
  6. & $!A \lif !B, !A \lif \lnot !B
  \Proves \lnot !A$ & 4, 5, Cut.
\end{tabular}

\smallskip\noindent
Finally, for part \olref{prop:consistent:3}: from the hypotheses by the
deduction theorem, $\Gamma \Proves !A \lif !B$ and $\Gamma
\Proves !A \lif \lnot !B$; from part \olref{prop:consistent:2}
and monotony, $\Gamma, !A \lif !B, !A \lif \lnot !B
  \Proves \lnot !A$; two applications of Cut give the desired result. 
\end{proof}

\begin{defn}[Consistency]
  A set $\Gamma$ of !!{formula}s is \emph{consistent} if and only if there
  is a !!{formula} $!A$ such that $\Gamma\Proves/!A$; it is
  \emph{inconsistent} otherwise.
\end{defn}

\begin{prop}
  $\Gamma$ is inconsistent if and only if there is a formula $!A$
  such that both $\Gamma \Proves !A$ and $\Gamma\Proves\lnot !A$.
\end{prop}

\begin{proof}
  The ``only if'' direction is obvious. For the converse, suppose that
  $\Gamma \Proves !A$ and $\Gamma\Proves\lnot !A$. Then by
  Proposition \olref{prop:derivfacts}, part (c) and monotony, $\Gamma
  \cup \{!A,\lnot!A \} \Proves !B$ for any !!{formula} $!B$,
  and now two applications of Cut give $\Gamma\Proves!B$ for any
  $!B$, so $\Gamma$ is inconsistent.
\end{proof}

\begin{prop}\ollabel{prop:proves}
  $\Gamma \Proves!A$ if and only if $\Gamma\cup \{\lnot!A \}$
  is inconsistent.
\end{prop}

\begin{proof}
  If $\Gamma \Proves !A$ then also $\Gamma, \lnot !A \Proves
  !A$ by monotony, and $\Gamma, \lnot !A \Proves
  \lnot !A$ by reflexivity, so $\Gamma\cup\{\lnot !A\}$ is
  inconsistent.  Conversely, suppose $\Gamma\cup\{\lnot !A\}$ is
  inconsistent. Then $\Gamma \lnot !A \Proves !C$ and $\Gamma
  \lnot !A \Proves \lnot !C$ for some $!C$. By
  Prop. \olref{prop:consistent} part \olref{prop:consistent:3},
  $\Gamma \Proves \lnot \lnot !A$. But also $\lnot\lnot!A
  \Proves !A$, by double negation so that by cut $\Gamma \Proves
  !A$. 
\end{proof}

\begin{prop}\ollabel{prop:phi}
  If $\Gamma$ is consistent, then for any !!{formula} $!A$, either
  $\Gamma \cup\{!A\}$ is consistent or $\Gamma \cup\{\lnot
  !A\}$ is consistent.
\end{prop}

\begin{proof}
  From Prop. \olref{prop:proves} we have that if $\Gamma \cup\{\lnot
  !A\}$ is inconsistent, then $\Gamma \Proves !A$; if $\Gamma
  \cup\{ !A\}$ is also inconsistent, then $\Gamma \cup\{
  !A\} \Proves !B$ for any $!B$. But then by Cut $\Gamma
  \Proves !B$ for any $!B$, so $\Gamma$ is inconsistent.
\end{proof}

\begin{prop}
  $\Gamma$ is consistent if and only if every finite subset
  $\Gamma_0\subseteq \Gamma$ is consistent.
\end{prop}
\begin{proof}
 For the non-trivial direction: if $\Gamma$ is inconsistent, then
 $\Gamma \Proves !B$ and $\Gamma \Proves \lnot !B$ for some
$!B$; each !!{derivation} involves only finitely many !!{formula}s from
$\Gamma$;
collect the ones occurring in the first !!{derivation} into the finite set
$\Gamma_1$, and those occurring in the second proof into the finite
 set $\Gamma_2$. Then $\Gamma_0 = \Gamma_1 \cup \Gamma_2$ is a finite
 subset of $\Gamma$ that is a inconsistent.   
\end{proof}


\begin{prob}
Show that the following hold by \emph{exhibiting} !!{derivation}s from the
axioms (i.e., without using meta-theoretic facts such as Cut,
  Monotony, the Deduction Theorem, etc.):
  \begin{itemize}
  \item $\{!A\lif !B, !B\lif !C\} \Proves !A\lif !C$;
  \item $\Proves !A \lif !A$;
  \item $\Proves \lnot !A \lif (!A \lif !B)$;
  \item $\Proves !A \supset (\lnot !A \lif !B)$.
 \end{itemize}
\end{prob}

\end{document}